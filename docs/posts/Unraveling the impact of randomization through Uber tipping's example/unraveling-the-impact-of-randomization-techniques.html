<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.4.550">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="kakamana">

<title>Kakamana’s Blogs - Unraveling the Impact of Randomization Techniques: A Case Study on Uber’s Tipping Experiment</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="../../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../../site_libs/quarto-search/fuse.min.js"></script>
<script src="../../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../../">
<script src="../../site_libs/quarto-html/quarto.js"></script>
<script src="../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../../site_libs/quarto-html/anchor.min.js"></script>
<link href="../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>


<link rel="stylesheet" href="../../styles.css">
</head>

<body class="nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a class="navbar-brand" href="../../index.html">
    <span class="navbar-title">Kakamana’s Blogs</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item">
    <a class="nav-link" href="../../index.html"> 
<span class="menu-text">Home</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../about.html"> 
<span class="menu-text">About</span></a>
  </li>  
</ul>
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item">
    <a class="nav-link" href="../../about.html"> 
<span class="menu-text">About</span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://kakamana.github.io"> <i class="bi bi-github" role="img">
</i> 
<span class="menu-text"></span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://twitter.com/Nerdy_kakamana"> <i class="bi bi-twitter" role="img">
</i> 
<span class="menu-text"></span></a>
  </li>  
</ul>
          </div> <!-- /navcollapse -->
          <div class="quarto-navbar-tools">
</div>
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#introduction" id="toc-introduction" class="nav-link active" data-scroll-target="#introduction"><strong>Introduction</strong></a></li>
  <li><a href="#access-randomization" id="toc-access-randomization" class="nav-link" data-scroll-target="#access-randomization"><strong>Access Randomization</strong></a></li>
  <li><a href="#timing-randomization" id="toc-timing-randomization" class="nav-link" data-scroll-target="#timing-randomization">Timing Randomization:</a></li>
  <li><a href="#encouragement-randomization" id="toc-encouragement-randomization" class="nav-link" data-scroll-target="#encouragement-randomization"><strong>Encouragement Randomization</strong>:</a></li>
  <li><a href="#statistical-analysis-with-regression" id="toc-statistical-analysis-with-regression" class="nav-link" data-scroll-target="#statistical-analysis-with-regression"><strong>Statistical Analysis with Regression</strong>:</a></li>
  <li><a href="#quick-references" id="toc-quick-references" class="nav-link" data-scroll-target="#quick-references"><strong>Quick References</strong></a></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Unraveling the Impact of Randomization Techniques: A Case Study on Uber’s Tipping Experiment</h1>
  <div class="quarto-categories">
    <div class="quarto-category">python</div>
    <div class="quarto-category">university of michigan</div>
    <div class="quarto-category">randomization</div>
    <div class="quarto-category">statistical analysi</div>
  </div>
  </div>



<div class="quarto-title-meta">

    <div>
    <div class="quarto-title-meta-heading">Author</div>
    <div class="quarto-title-meta-contents">
             <p>kakamana </p>
          </div>
  </div>
    
  
    
  </div>
  


</header>


<p>::: {#2c46bd46 .cell _cell_guid=‘b1076dfc-b9ad-4769-8c92-a6c4dae69d19’ _uuid=‘8f2839f25d086af736a60e9eeb907d3b93b6e0e5’ execution=‘{“iopub.execute_input”:“2024-03-17T18:46:51.611450Z”,“iopub.status.busy”:“2024-03-17T18:46:51.611065Z”,“iopub.status.idle”:“2024-03-17T18:46:52.720502Z”,“shell.execute_reply”:“2024-03-17T18:46:52.719447Z”}’ papermill=‘{“duration”:1.120128,“end_time”:“2024-03-17T18:46:52.723250”,“exception”:false,“start_time”:“2024-03-17T18:46:51.603122”,“status”:“completed”}’ tags=‘[]’ execution_count=1}</p>
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="co"># This Python 3 environment comes with many helpful analytics libraries installed</span></span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="co"># It is defined by the kaggle/python Docker image: https://github.com/kaggle/docker-python</span></span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="co"># For example, here's several helpful packages to load</span></span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> numpy <span class="im">as</span> np <span class="co"># linear algebra</span></span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> pandas <span class="im">as</span> pd <span class="co"># data processing, CSV file I/O (e.g. pd.read_csv)</span></span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true" tabindex="-1"></a><span class="co"># Input data files are available in the read-only "../input/" directory</span></span>
<span id="cb1-9"><a href="#cb1-9" aria-hidden="true" tabindex="-1"></a><span class="co"># For example, running this (by clicking run or pressing Shift+Enter) will list all files under the input directory</span></span>
<span id="cb1-10"><a href="#cb1-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-11"><a href="#cb1-11" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> os</span>
<span id="cb1-12"><a href="#cb1-12" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> dirname, _, filenames <span class="kw">in</span> os.walk(<span class="st">'/kaggle/input'</span>):</span>
<span id="cb1-13"><a href="#cb1-13" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> filename <span class="kw">in</span> filenames:</span>
<span id="cb1-14"><a href="#cb1-14" aria-hidden="true" tabindex="-1"></a>        <span class="bu">print</span>(os.path.join(dirname, filename))</span>
<span id="cb1-15"><a href="#cb1-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-16"><a href="#cb1-16" aria-hidden="true" tabindex="-1"></a><span class="co"># You can write up to 20GB to the current directory (/kaggle/working/) that gets preserved as output when you create a version using "Save &amp; Run All" </span></span>
<span id="cb1-17"><a href="#cb1-17" aria-hidden="true" tabindex="-1"></a><span class="co"># You can also write temporary files to /kaggle/temp/, but they won't be saved outside of the current session</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<p>:::</p>
<p>This notebook is part of learning journey through my graduate applied data science program at University Of Michigan, along with courses of Datacamp, Coursera &amp; LinkedIn etc.</p>
<p>This notobook is continuation of my understanding about experimental design &amp; analysis, here I am trying to discuss about randomization technique with help of uber tipping experiment use case for their drivers conducted couple of years back.</p>
<p>You can refer to <a href="https://medium.com/@kamig4u/unraveling-the-impact-of-randomization-techniques-a-case-study-on-ubers-tipping-experiment-356c7c9cc9a0">my story</a> at <a href="https://medium.com/@kamig4u">medium</a> and my <a href="https://www.linkedin.com/feed/update/urn:li:linkedInArticle:7175185168029151232/?lipi=urn%3Ali%3Apage%3Ad_flagship3_pulse_read%3B1BuBqedIQ72C6s1VoxfK%2BA%3D%3D">article</a> at <a href="https://www.linkedin.com/in/asadenterprisearchitect/">linkedin</a> for more details</p>
<p>This article includes:</p>
<ul>
<li><pre><code>A brief introduction</code></pre></li>
<li><pre><code>Access Randomization </code></pre></li>
<li><pre><code>Timing Randomization </code></pre></li>
<li><pre><code>Encouragement Randomization</code></pre></li>
<li><pre><code>Quick references</code></pre></li>
<li><pre><code>Conclusion</code></pre></li>
</ul>
<section id="introduction" class="level1">
<h1><strong>Introduction</strong></h1>
<p>Randomization stands as a cornerstone in the edifice of experimental design, offering a robust defense against biases and confounding variables. This blog post embarks on an exploration of three pivotal randomization techniques — access, timing, and encouragement randomization. Each method plays a vital role in fortifying the integrity of experimental outcomes, ensuring that the causal inferences drawn are devoid of bias. To bring these concepts to life, we delve into the Uber tipping experiment, elucidating how each randomization technique can be applied. We further enhance our exploration with Python illustrations, showcasing their practical implementation and offering insights through statistical models.</p>
</section>
<section id="access-randomization" class="level1">
<h1><strong>Access Randomization</strong></h1>
<p>At the heart of access randomization lies the equitable distribution of subjects into treatment and control groups. This approach ensures that the intervention under scrutiny is exclusively available to the treatment group, providing a clear demarcation for comparative analysis.</p>
<p><strong>Uber Tipping Experiment Application:</strong></p>
<p>Imagine a scenario where Uber wishes to assess the impact of a new tipping feature on driver satisfaction. Utilizing access randomization, drivers are bifurcated into two cohorts; one gains access to the tipping functionality (treatment), while the other continues without it (control).</p>
<div id="9e6bd69d" class="cell" data-execution="{&quot;iopub.execute_input&quot;:&quot;2024-03-17T18:46:52.775275Z&quot;,&quot;iopub.status.busy&quot;:&quot;2024-03-17T18:46:52.774704Z&quot;,&quot;iopub.status.idle&quot;:&quot;2024-03-17T18:46:52.780612Z&quot;,&quot;shell.execute_reply&quot;:&quot;2024-03-17T18:46:52.779745Z&quot;}" data-papermill="{&quot;duration&quot;:0.014819,&quot;end_time&quot;:&quot;2024-03-17T18:46:52.782989&quot;,&quot;exception&quot;:false,&quot;start_time&quot;:&quot;2024-03-17T18:46:52.768170&quot;,&quot;status&quot;:&quot;completed&quot;}" data-tags="[]" data-execution_count="2">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb8"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> random</span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-3"><a href="#cb8-3" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> access_randomization(drivers):</span>
<span id="cb8-4"><a href="#cb8-4" aria-hidden="true" tabindex="-1"></a>    treatment_group <span class="op">=</span> random.sample(drivers, <span class="bu">len</span>(drivers) <span class="op">//</span> <span class="dv">2</span>)</span>
<span id="cb8-5"><a href="#cb8-5" aria-hidden="true" tabindex="-1"></a>    control_group <span class="op">=</span> [driver <span class="cf">for</span> driver <span class="kw">in</span> drivers <span class="cf">if</span> driver <span class="kw">not</span> <span class="kw">in</span> treatment_group]</span>
<span id="cb8-6"><a href="#cb8-6" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> treatment_group, control_group</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<div id="ba156171" class="cell" data-execution="{&quot;iopub.execute_input&quot;:&quot;2024-03-17T18:46:52.796731Z&quot;,&quot;iopub.status.busy&quot;:&quot;2024-03-17T18:46:52.796094Z&quot;,&quot;iopub.status.idle&quot;:&quot;2024-03-17T18:46:52.802170Z&quot;,&quot;shell.execute_reply&quot;:&quot;2024-03-17T18:46:52.801078Z&quot;}" data-papermill="{&quot;duration&quot;:0.015367,&quot;end_time&quot;:&quot;2024-03-17T18:46:52.804626&quot;,&quot;exception&quot;:false,&quot;start_time&quot;:&quot;2024-03-17T18:46:52.789259&quot;,&quot;status&quot;:&quot;completed&quot;}" data-tags="[]" data-execution_count="3">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> numpy <span class="im">as</span> np</span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-3"><a href="#cb9-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Simulating driver IDs</span></span>
<span id="cb9-4"><a href="#cb9-4" aria-hidden="true" tabindex="-1"></a>drivers <span class="op">=</span> np.arange(<span class="dv">1</span>, <span class="dv">101</span>)</span>
<span id="cb9-5"><a href="#cb9-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-6"><a href="#cb9-6" aria-hidden="true" tabindex="-1"></a><span class="co"># Randomly assigning drivers to treatment and control groups</span></span>
<span id="cb9-7"><a href="#cb9-7" aria-hidden="true" tabindex="-1"></a>np.random.shuffle(drivers)</span>
<span id="cb9-8"><a href="#cb9-8" aria-hidden="true" tabindex="-1"></a>treatment_group <span class="op">=</span> drivers[:<span class="dv">50</span>]  <span class="co"># First 50 drivers</span></span>
<span id="cb9-9"><a href="#cb9-9" aria-hidden="true" tabindex="-1"></a>control_group <span class="op">=</span> drivers[<span class="dv">50</span>:]  <span class="co"># Remaining drivers</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</section>
<section id="timing-randomization" class="level1">
<h1>Timing Randomization:</h1>
<p>Timing randomization introduces variability in the temporal aspect of treatment delivery. This method is particularly beneficial when all subjects are destined to receive the treatment, but the sequence of administration is randomized.</p>
<p><strong>Uber Tipping Experiment Application:</strong></p>
<p>In applying this to our Uber case, let’s consider a phased rollout of the tipping feature. Drivers are randomly assigned to different phases, ensuring an unbiased evaluation of the feature’s impact over time.</p>
<div id="75cb1822" class="cell" data-execution="{&quot;iopub.execute_input&quot;:&quot;2024-03-17T18:46:52.828862Z&quot;,&quot;iopub.status.busy&quot;:&quot;2024-03-17T18:46:52.828016Z&quot;,&quot;iopub.status.idle&quot;:&quot;2024-03-17T18:46:52.835678Z&quot;,&quot;shell.execute_reply&quot;:&quot;2024-03-17T18:46:52.834801Z&quot;}" data-papermill="{&quot;duration&quot;:0.017101,&quot;end_time&quot;:&quot;2024-03-17T18:46:52.838169&quot;,&quot;exception&quot;:false,&quot;start_time&quot;:&quot;2024-03-17T18:46:52.821068&quot;,&quot;status&quot;:&quot;completed&quot;}" data-tags="[]" data-execution_count="4">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb10"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> timing_randomization(drivers, num_waves):</span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a>    random.shuffle(drivers)</span>
<span id="cb10-3"><a href="#cb10-3" aria-hidden="true" tabindex="-1"></a>    wave_size <span class="op">=</span> <span class="bu">len</span>(drivers) <span class="op">//</span> num_waves</span>
<span id="cb10-4"><a href="#cb10-4" aria-hidden="true" tabindex="-1"></a>    waves <span class="op">=</span> [drivers[i:i<span class="op">+</span>wave_size] <span class="cf">for</span> i <span class="kw">in</span> <span class="bu">range</span>(<span class="dv">0</span>, <span class="bu">len</span>(drivers), wave_size)]</span>
<span id="cb10-5"><a href="#cb10-5" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> waves</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<div id="47839871" class="cell" data-execution="{&quot;iopub.execute_input&quot;:&quot;2024-03-17T18:46:52.850958Z&quot;,&quot;iopub.status.busy&quot;:&quot;2024-03-17T18:46:52.850519Z&quot;,&quot;iopub.status.idle&quot;:&quot;2024-03-17T18:46:52.861544Z&quot;,&quot;shell.execute_reply&quot;:&quot;2024-03-17T18:46:52.860073Z&quot;}" data-papermill="{&quot;duration&quot;:0.021081,&quot;end_time&quot;:&quot;2024-03-17T18:46:52.864852&quot;,&quot;exception&quot;:false,&quot;start_time&quot;:&quot;2024-03-17T18:46:52.843771&quot;,&quot;status&quot;:&quot;completed&quot;}" data-tags="[]" data-execution_count="5">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Defining phases for feature rollout</span></span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a>phases <span class="op">=</span> [<span class="st">'Phase 1'</span>, <span class="st">'Phase 2'</span>, <span class="st">'Phase 3'</span>]</span>
<span id="cb11-3"><a href="#cb11-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-4"><a href="#cb11-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Assigning drivers to phases</span></span>
<span id="cb11-5"><a href="#cb11-5" aria-hidden="true" tabindex="-1"></a>driver_phases <span class="op">=</span> np.random.choice(phases, size<span class="op">=</span><span class="bu">len</span>(drivers))</span>
<span id="cb11-6"><a href="#cb11-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-7"><a href="#cb11-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Analyzing the distribution of drivers across phases</span></span>
<span id="cb11-8"><a href="#cb11-8" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> phase <span class="kw">in</span> phases:</span>
<span id="cb11-9"><a href="#cb11-9" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(<span class="ss">f"</span><span class="sc">{</span>phase<span class="sc">}</span><span class="ss"> Drivers:"</span>, np.<span class="bu">sum</span>(driver_phases <span class="op">==</span> phase))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>Phase 1 Drivers: 31
Phase 2 Drivers: 38
Phase 3 Drivers: 31</code></pre>
</div>
</div>
</section>
<section id="encouragement-randomization" class="level1">
<h1><strong>Encouragement Randomization</strong>:</h1>
<p>Encouragement randomization is employed when the treatment is universally accessible, but a nudge is given to a randomly selected subgroup to encourage participation. This technique is instrumental in discerning the effect of encouragement on treatment uptake.</p>
<p><strong>Uber Tipping Experiment Application:</strong></p>
<p>In this context, while the tipping feature is available to all drivers, a randomized subset receives motivational messages or incentives to encourage the use of this feature, aiding in the assessment of encouragement’s effectiveness.</p>
<div id="3377a1fa" class="cell" data-execution="{&quot;iopub.execute_input&quot;:&quot;2024-03-17T18:46:52.892316Z&quot;,&quot;iopub.status.busy&quot;:&quot;2024-03-17T18:46:52.891937Z&quot;,&quot;iopub.status.idle&quot;:&quot;2024-03-17T18:46:52.898419Z&quot;,&quot;shell.execute_reply&quot;:&quot;2024-03-17T18:46:52.896914Z&quot;}" data-papermill="{&quot;duration&quot;:0.017032,&quot;end_time&quot;:&quot;2024-03-17T18:46:52.901360&quot;,&quot;exception&quot;:false,&quot;start_time&quot;:&quot;2024-03-17T18:46:52.884328&quot;,&quot;status&quot;:&quot;completed&quot;}" data-tags="[]" data-execution_count="6">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb13"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> encouragement_randomization(drivers, encouragement_ratio):</span>
<span id="cb13-2"><a href="#cb13-2" aria-hidden="true" tabindex="-1"></a>    num_encouraged <span class="op">=</span> <span class="bu">int</span>(<span class="bu">len</span>(drivers) <span class="op">*</span> encouragement_ratio)</span>
<span id="cb13-3"><a href="#cb13-3" aria-hidden="true" tabindex="-1"></a>    encouraged_group <span class="op">=</span> random.sample(drivers, num_encouraged)</span>
<span id="cb13-4"><a href="#cb13-4" aria-hidden="true" tabindex="-1"></a>    not_encouraged_group <span class="op">=</span> [driver <span class="cf">for</span> driver <span class="kw">in</span> drivers <span class="cf">if</span> driver <span class="kw">not</span> <span class="kw">in</span> encouraged_group]</span>
<span id="cb13-5"><a href="#cb13-5" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> encouraged_group, not_encouraged_group</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<div id="4a0c2658" class="cell" data-execution="{&quot;iopub.execute_input&quot;:&quot;2024-03-17T18:46:52.916787Z&quot;,&quot;iopub.status.busy&quot;:&quot;2024-03-17T18:46:52.915432Z&quot;,&quot;iopub.status.idle&quot;:&quot;2024-03-17T18:46:52.925128Z&quot;,&quot;shell.execute_reply&quot;:&quot;2024-03-17T18:46:52.923999Z&quot;}" data-papermill="{&quot;duration&quot;:0.02058,&quot;end_time&quot;:&quot;2024-03-17T18:46:52.927996&quot;,&quot;exception&quot;:false,&quot;start_time&quot;:&quot;2024-03-17T18:46:52.907416&quot;,&quot;status&quot;:&quot;completed&quot;}" data-tags="[]" data-execution_count="7">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb14"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Defining encouragement proportion</span></span>
<span id="cb14-2"><a href="#cb14-2" aria-hidden="true" tabindex="-1"></a>encouragement_ratio <span class="op">=</span> <span class="fl">0.3</span></span>
<span id="cb14-3"><a href="#cb14-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-4"><a href="#cb14-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Randomly selecting drivers for encouragement</span></span>
<span id="cb14-5"><a href="#cb14-5" aria-hidden="true" tabindex="-1"></a>encouraged_drivers <span class="op">=</span> np.random.choice(drivers, size<span class="op">=</span><span class="bu">int</span>(<span class="bu">len</span>(drivers) <span class="op">*</span> encouragement_ratio), replace<span class="op">=</span><span class="va">False</span>)</span>
<span id="cb14-6"><a href="#cb14-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-7"><a href="#cb14-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Examining the encouraged group</span></span>
<span id="cb14-8"><a href="#cb14-8" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"Encouraged Drivers:"</span>, encouraged_drivers)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>Encouraged Drivers: [66 41 47 75  5 34 54 17 20 59 73 24 95 29 16 65 44 23 45 11 70 25 76 74
 80 63 85 50 38 72]</code></pre>
</div>
</div>
</section>
<section id="statistical-analysis-with-regression" class="level1">
<h1><strong>Statistical Analysis with Regression</strong>:</h1>
<p>To delve deeper into the data’s story, a regression analysis can provide quantifiable insights into the factors influencing tipping behavior.</p>
<p><strong>Regression Model Summary:</strong></p>
<div id="5cc51d82" class="cell" data-execution="{&quot;iopub.execute_input&quot;:&quot;2024-03-17T18:46:52.955117Z&quot;,&quot;iopub.status.busy&quot;:&quot;2024-03-17T18:46:52.954636Z&quot;,&quot;iopub.status.idle&quot;:&quot;2024-03-17T18:46:56.879601Z&quot;,&quot;shell.execute_reply&quot;:&quot;2024-03-17T18:46:56.877923Z&quot;}" data-papermill="{&quot;duration&quot;:3.935234,&quot;end_time&quot;:&quot;2024-03-17T18:46:56.881461&quot;,&quot;exception&quot;:true,&quot;start_time&quot;:&quot;2024-03-17T18:46:52.946227&quot;,&quot;status&quot;:&quot;failed&quot;}" data-tags="[]" data-execution_count="8">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb16"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> statsmodels.api <span class="im">as</span> sm</span>
<span id="cb16-2"><a href="#cb16-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-3"><a href="#cb16-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Assuming 'df' is a DataFrame with 'tip_amount', 'treated', 'encouraged', and other relevant variables</span></span>
<span id="cb16-4"><a href="#cb16-4" aria-hidden="true" tabindex="-1"></a>X <span class="op">=</span> sm.add_constant(df[[<span class="st">'treated'</span>, <span class="st">'encouraged'</span>]])</span>
<span id="cb16-5"><a href="#cb16-5" aria-hidden="true" tabindex="-1"></a>y <span class="op">=</span> df[<span class="st">'tip_amount'</span>]</span>
<span id="cb16-6"><a href="#cb16-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-7"><a href="#cb16-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Fitting an OLS regression model</span></span>
<span id="cb16-8"><a href="#cb16-8" aria-hidden="true" tabindex="-1"></a>model <span class="op">=</span> sm.OLS(y, X).fit()</span>
<span id="cb16-9"><a href="#cb16-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-10"><a href="#cb16-10" aria-hidden="true" tabindex="-1"></a><span class="co"># Displaying the model summary</span></span>
<span id="cb16-11"><a href="#cb16-11" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(model.summary())</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-error">
<pre><code>NameError: name 'df' is not defined</code></pre>
</div>
</div>
<p>This model allows us to parse the influence of being in the treatment group and receiving encouragement on the tipping amounts, controlling for other variables as necessary.</p>
</section>
<section id="quick-references" class="level1">
<h1><strong>Quick References</strong></h1>
<ul>
<li><pre><code>“Randomized Controlled Trials: Design and Implementation for Community-Based Psychosocial Interventions” by Phyllis Solomon, Mary M. Cavanaugh, and Jeffrey Draine. This book offers insights into the application of randomized controlled trials in community settings. [1](https://www.amazon.com/Randomized-Controlled-Trials-Implementation-Community-Based/dp/0195333195)</code></pre></li>
<li><pre><code>“Design and Analysis of Experiments” by Douglas C. Montgomery. This classic text provides a comprehensive overview of experimental design principles, including randomization techniques. [2](https://www.wiley.com/en-ae/Design+and+Analysis+of+Experiments%2C+10th+Edition-p-9781119492443)</code></pre></li>
</ul>
<p><strong>Timing Randomization:</strong></p>
<ul>
<li><pre><code>“The Handbook of Experimental Economics, Volume 2” by John H. Kagel and Alvin E. Roth, eds. This collection includes chapters that discuss the importance of timing in experimental economics. [3](https://www.jstor.org/stable/j.ctvc77b40)</code></pre></li>
<li><pre><code>“Field Experiments and Their Critics: Essays on the Uses and Abuses of Experimentation in the Social Sciences” by Dawn Langan Teele. This work debates the use of field experiments and discusses timing randomization among other topics. [4](https://yalebooks.yale.edu/book/9780300169409/field-experiments-and-their-critics/)</code></pre></li>
</ul>
<p><strong>Encouragement Randomization:</strong></p>
<ul>
<li><pre><code>“Mostly Harmless Econometrics: An Empiricist’s Companion” by Joshua D. Angrist and Jörn-Steffen Pischke. This book simplifies the application of econometric techniques, including instrumental variables often used in encouragement randomization. [5](https://www.jstor.org/stable/j.ctvcm4j72)</code></pre></li>
<li><pre><code>“Instrumental Variables: An Econometrician’s Perspective” by Guido W. Imbens. A detailed discussion on instrumental variables, closely related to encouragement randomization, providing a solid statistical foundation. [6](https://www.jstor.org/stable/43288511)</code></pre></li>
</ul>
<p><strong>General Experimental Design and Analysis:</strong></p>
<ul>
<li><pre><code>“Experimental and Quasi-Experimental Designs for Generalized Causal Inference” by William R. Shadish, Thomas D. Cook, and Donald T. Campbell. A key text for understanding the principles behind experimental design and causal inference. [7](https://www.amazon.com/Experimental-Quasi-Experimental-Designs-Generalized-Inference/dp/0395615569)</code></pre></li>
<li><pre><code>“Python for Data Analysis” by Wes McKinney. Ideal for readers looking to implement experimental design techniques in Python, written by the creator of the pandas library. [8](https://wesmckinney.com/book/)</code></pre></li>
</ul>


</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
<script src="https://utteranc.es/client.js" repo="kakamana/blogComments" issue-term="pathname" theme="github-light" crossorigin="anonymous" async="">
</script>
</div> <!-- /content -->




</body></html>